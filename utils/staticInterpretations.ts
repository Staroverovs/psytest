
import { TestDefinition, TestResult } from '../types';

export const getStaticInterpretation = (result: TestResult, testDef: TestDefinition): string => {
  const score = result.totalScore;
  let severity = "";
  let description = "";
  let recommendation = "";

  // –õ–æ–≥–∏–∫–∞ –¥–ª—è PHQ-9
  if (testDef.id === 'phq-9') {
    if (score <= 4) {
      severity = "–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–µ–ø—Ä–µ—Å—Å–∏–≤–Ω—ã—Ö —Å–∏–º–ø—Ç–æ–º–æ–≤";
      description = "–í–∞—à–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã. –í—ã –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ –∑–Ω–∞—á–∏–º—ã—Ö —Å–∏–º–ø—Ç–æ–º–æ–≤ –¥–µ–ø—Ä–µ—Å—Å–∏–∏.";
      recommendation = "–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å–≤–æ–π —Ç–µ–∫—É—â–∏–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏ –∏ —Ä–µ–∂–∏–º —Å–Ω–∞.";
    } else if (score <= 9) {
      severity = "–õ–µ–≥–∫–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è (—Å—É–±–∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è)";
      description = "–ù–∞–±–ª—é–¥–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ —Å–Ω–∏–∂–µ–Ω–Ω–æ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è –∏–ª–∏ —É—Å—Ç–∞–ª–æ—Å—Ç–∏, –Ω–æ –æ–Ω–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –º–µ—à–∞—Ç—å –≤–∞—à–µ–π –∂–∏–∑–Ω–∏.";
      recommendation = "–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∂–∏–º –æ—Ç–¥—ã—Ö–∞ (¬´–≥–∏–≥–∏–µ–Ω–∞ —Å–Ω–∞¬ª) –∏ —É—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–µ—Å—Å–∞. –ü–æ–Ω–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º.";
    } else if (score <= 14) {
      severity = "–£–º–µ—Ä–µ–Ω–Ω–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è";
      description = "–°–∏–º–ø—Ç–æ–º—ã –º–æ–≥—É—Ç –Ω–∞—á–∞—Ç—å –≤–ª–∏—è—Ç—å –Ω–∞ –≤–∞—à—É –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –≤—ã–∑—ã–≤–∞—è —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ —Å –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–µ–π –∏–ª–∏ –º–æ—Ç–∏–≤–∞—Ü–∏–µ–π.";
      recommendation = "–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø—Å–∏—Ö–æ–ª–æ–≥–∞ –¥–ª—è –ø—Ä–æ—Ä–∞–±–æ—Ç–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è.";
    } else if (score <= 19) {
      severity = "–í—ã—Ä–∞–∂–µ–Ω–Ω–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è";
      description = "–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –∂–∏–∑–Ω–∏, –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è –ø–æ–¥–∞–≤–ª–µ–Ω–Ω–æ—Å—Ç—å –∏ —É–ø–∞–¥–æ–∫ —Å–∏–ª.";
      recommendation = "–ù–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç—É –∏–ª–∏ –ø—Å–∏—Ö–∏–∞—Ç—Ä—É.";
    } else {
      severity = "–¢—è–∂–µ–ª–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è";
      description = "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —Å–∏–º–ø—Ç–æ–º–∞—Ç–∏–∫–∏, —Ç—Ä–µ–±—É—é—â–∏–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞.";
      recommendation = "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∑–∞ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π –ø–æ–º–æ—â—å—é –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.";
    }
  }

  // –õ–æ–≥–∏–∫–∞ –¥–ª—è GAD-7
  else if (testDef.id === 'gad-7') {
    if (score <= 4) {
      severity = "–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ç—Ä–µ–≤–æ–≥–∞";
      description = "–£—Ä–æ–≤–µ–Ω—å —Ç—Ä–µ–≤–æ–≥–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã.";
    } else if (score <= 9) {
      severity = "–õ–µ–≥–∫–∞—è —Ç—Ä–µ–≤–æ–≥–∞";
      description = "–í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø—ã—Ç—ã–≤–∞—Ç—å –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ —á–∞—â–µ –æ–±—ã—á–Ω–æ–≥–æ, –Ω–æ —ç—Ç–æ –ø–æ–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ.";
    } else if (score <= 14) {
      severity = "–£–º–µ—Ä–µ–Ω–Ω–∞—è —Ç—Ä–µ–≤–æ–≥–∞";
      description = "–¢—Ä–µ–≤–æ–≥–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞–≤—è–∑—á–∏–≤–æ–π –∏ –º–æ–∂–µ—Ç –º–µ—à–∞—Ç—å —Ä–∞—Å—Å–ª–∞–±–∏—Ç—å—Å—è.";
    } else {
      severity = "–í—ã—Ä–∞–∂–µ–Ω–Ω–∞—è —Ç—Ä–µ–≤–æ–≥–∞";
      description = "–í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —Å–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –Ω–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–∏.";
    }
    recommendation = score > 9 ? "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –æ—Å–≤–æ–∏—Ç—å —Ç–µ—Ö–Ω–∏–∫–∏ —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏ –∏ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –ø—Å–∏—Ö–æ–ª–æ–≥—É." : "–ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –º–∞–π–Ω–¥—Ñ—É–ª–Ω–µ—Å—Å –∏ –¥—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è.";
  }

  // –õ–æ–≥–∏–∫–∞ –¥–ª—è BDI-II
  else if (testDef.id === 'bdi-ii') {
    if (score <= 13) severity = "–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è";
    else if (score <= 19) severity = "–õ–µ–≥–∫–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è";
    else if (score <= 28) severity = "–£–º–µ—Ä–µ–Ω–Ω–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è";
    else severity = "–¢—è–∂–µ–ª–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è";
    
    description = `–°–æ–≥–ª–∞—Å–Ω–æ —à–∫–∞–ª–µ –ë–µ–∫–∞, –≤–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç (${score}) —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —É—Ä–æ–≤–Ω—é: ${severity}.`;
    recommendation = score > 13 ? "–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º." : "–í–∞—à–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ.";
  }

  // –õ–æ–≥–∏–∫–∞ –¥–ª—è BAI
  else if (testDef.id === 'bai') {
    if (score <= 21) severity = "–ù–∏–∑–∫–∞—è —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å";
    else if (score <= 35) severity = "–°—Ä–µ–¥–Ω—è—è —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å";
    else severity = "–í—ã—Å–æ–∫–∞—è —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å";
    
    description = `–®–∫–∞–ª–∞ —Ç—Ä–µ–≤–æ–≥–∏ –ë–µ–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã–π –¥–ª—è —É—Ä–æ–≤–Ω—è: ${severity}.`;
    recommendation = "–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—è–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–µ—Å—Å–∞ (–Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –º—ã—à—Ü, –¥—ã—Ö–∞–Ω–∏–µ).";
  }

  // –õ–æ–≥–∏–∫–∞ –¥–ª—è DERS-36 –∏ –¥—Ä—É–≥–∏—Ö (Generic fallback)
  else {
    const percentage = (score / result.maxPossibleScore) * 100;
    if (percentage < 30) severity = "–ù–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π";
    else if (percentage < 60) severity = "–°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π";
    else severity = "–í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π";

    description = `–í –¥–∞–Ω–Ω–æ–º —Ç–µ—Å—Ç–µ –≤—ã –Ω–∞–±—Ä–∞–ª–∏ ${score} –±–∞–ª–ª–æ–≤ –∏–∑ ${result.maxPossibleScore}.`;
    recommendation = "–î–ª—è —Ç–æ—á–Ω–æ–π –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ —à–∫–∞–ª —ç—Ç–æ–≥–æ —Ç–µ—Å—Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ä–∞–∑–±–æ—Ä –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É —Ü–µ–Ω—Ç—Ä–∞ ¬´–î–∏–∞–ª–µ–∫—Ç–∏–∫–∞¬ª.";
  }

  // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ Markdown
  return `### üìä –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è (Offline —Ä–µ–∂–∏–º)
  
**–°—Ç–∞—Ç—É—Å –ò–ò:** *–í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –ø–æ—ç—Ç–æ–º—É –º—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏ –¥–ª—è –≤–∞—Å –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–±–æ—Ä.*

### üîç –í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${severity}

${description}

### üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
${recommendation}

---
*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –≠—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π —Ç–µ—Å—Ç–∞.*`;
};
